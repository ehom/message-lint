#!/usr/bin/env python3

import os
import sys
import argparse

from pprint import PrettyPrinter

fpath = os.path.join(os.path.dirname(__file__), '..')
sys.path.append(fpath)

import utils


def process(filename):
    reader = utils.FileReader.get(filename)
    writer = utils.FileWriter.get(filename)

    utils.FileProcessor(reader, writer).execute()


def main():
    parser = argparse.ArgumentParser(description="lint a list of message resource files")
    parser.add_argument("--files",  type=str, nargs='+',
                        help="list of files to be linted", required=True)
    parser.add_argument("--dest", help="folder where the report files will be written to.",
                        required=False)
    args = parser.parse_args(args=None if sys.argv[1:] else ["--help"])

    print(args.files)
    print(args.dest)

    for file in args.files:
        process(file)


if __name__ == "__main__":
    main()
